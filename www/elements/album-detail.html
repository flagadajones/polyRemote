<!--script src="../deps/webcomponentsjs/webcomponents.js"></script-->

<link rel="import" href="../deps/core-list/core-list.html">
  <script src="../lib/color-thief.min.js"></script>
  <script src="../lib/colorUtils.js"></script>
<polymer-element name="album-detail" attributes="album" layout vertical>
  <template>
    <style>
 img.blur {
    width: 100%;
    /*  height: 100%;*/
    -webkit-filter: blur(3px);
    -moz-filter: blur(3px);
    -o-filter: blur(3px);
    -ms-filter: blur(3px);
    filter: blur(3px);
position:absolute;
}
#details {
    /*200pxpadding: 10px 10% 0;*/
    width: 740px;
    margin: auto;
    height: 100%;
    box-shadow: 0 27px 24px 0 rgba(0, 0, 0, 0.6);
    poosition:relative;
}
.mycard {
    height: 540px;
    border-radius: 3px;
    text-align: start;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}
.card-left {
    width: 200px;
    height: 200px;
    float: left;
    background-size: 100%;
}

.card-album-title {
    font-size: 2em;
}
.card-album-artist,
.card-album-title {
  display:block;
    text-align: center;
color:black;
}
.card-player-button{
  height:63px;

}
    </style>
<!--img  src="{{album.albumArt}}" class="blur"-->
 <section id="details" class="details" >

    <div class="mycard " layout vertical flex >
  <div layout horizontal>
                <div class="card-left "  style="background-image: url({{album.albumArt}});background-size: 100%; "
				
				hero-id="album-{{album._id}}" hero>

                </div>
 <div  flex auto-horizontal layout vertical style="height:200px" >
                        <div layout vertical flex style="background-color:{{color}};color:{{textColor}}">
                            <div flex auto  class="card-album-title ">{{album.title}}</div>
                            <div flex  auto class="card-album-artist ">{{album.artist}}</div>
                        </div>
                    <div layout horizontal style="background-color:{{deeperColor}}">
                        <a  style="color:{{textColor}}" flex class="card-player-button button button-icon icon ion-ios7-rewind"></a>
                        <a flex style="color:{{textColor}}" class="card-player-button button button-icon icon ion-ios7-pause"></a>
                        <a flex style="color:{{textColor}}" class="card-player-button button button-icon icon ion-ios7-fastforward"></a>
                    </div>
                </div>
</div>


        <div style="height:250px ;overflow:auto">
		<!--core-list id="list3" data="{{album.pistes}}" height="48" fit -->
          <template repeat="{{model in lis}}">
             <div layout horizontal  style="height:48px;color:black" center>
					  <div >{{model.originalTrackNumber}}</div><div flex auto>{{model.title}}</div><div > {{model.duration}}</div>
                  </div>
          </template>
        <!--/core-list-->

</div>
        </section>

  </template>
  <script>
    Polymer({
      lis:[{originalTrackNumber:"1","server":"55076f6e-6b79-4d65-6471-b8a386975678",title:"Sortis du bois","artist":"Mes Souliers Sont Rouges","duration":"0:04:04","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I846346.mp3","_id":"$0$1$12$8855R846346"},{"originalTrackNumber":"2","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Manivelle","artist":"Mes Souliers Sont Rouges","duration":"0:04:11","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I844554.mp3","_id":"$0$1$12$8855R844554"},{"originalTrackNumber":"3","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Loin","artist":"Mes Souliers Sont Rouges","duration":"0:04:20","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I846090.mp3","_id":"$0$1$12$8855R846090"},{"originalTrackNumber":"4","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Monsieur Fernand","artist":"Mes Souliers Sont Rouges","duration":"0:04:26","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I845834.mp3","_id":"$0$1$12$8855R845834"},{"originalTrackNumber":"5","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Mon amant","artist":"Mes Souliers Sont Rouges","duration":"0:03:36","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I846858.mp3","_id":"$0$1$12$8855R846858"},{"originalTrackNumber":"6","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Ailleurs","artist":"Mes Souliers Sont Rouges","duration":"0:04:08","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I845322.mp3","_id":"$0$1$12$8855R845322"},{"originalTrackNumber":"7","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Isabelle","artist":"Mes Souliers Sont Rouges","duration":"0:02:22","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I843786.mp3","_id":"$0$1$12$8855R843786"},{"originalTrackNumber":"8","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Petite Galiote","artist":"Mes Souliers Sont Rouges","duration":"0:03:54","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I844810.mp3","_id":"$0$1$12$8855R844810"},{"originalTrackNumber":"9","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Printemps","artist":"Mes Souliers Sont Rouges","duration":"0:05:15","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I846602.mp3","_id":"$0$1$12$8855R846602"},{"originalTrackNumber":"10","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Eau trouble","artist":"Mes Souliers Sont Rouges","duration":"0:05:09","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I844298.mp3","_id":"$0$1$12$8855R844298"},{"originalTrackNumber":"11","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Epouse-moi","artist":"Mes Souliers Sont Rouges","duration":"0:04:04","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I844042.mp3","_id":"$0$1$12$8855R844042"},{"originalTrackNumber":"12","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Trois quarts de lune","artist":"Mes Souliers Sont Rouges","duration":"0:02:45","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I845578.mp3","_id":"$0$1$12$8855R845578"},{"originalTrackNumber":"13","server":"55076f6e-6b79-4d65-6471-b8a386975678","title":"Le cycle du vin","artist":"Mes Souliers Sont Rouges","duration":"0:03:37","url":"http://192.168.0.32:9000/disk/DLNA-PNMP3-OP01-FLAGS01700000/O0$1$8I845066.mp3","_id":"$0$1$12$8855R845066"}],
rgbToHex :
            function (color) {
                var result = "#" + this.componentToHex(color[0]) + this.componentToHex(color[1]) + this.componentToHex(color[2]);

                return result;
        },
		componentToHex :
            function (c) {
                var hex = c.toString(16);
                return hex.length == 1 ? "0" + hex : hex;
        },

		colorLuminance : function (hex, lum) {

            // validate hex string
            hex = String(hex).replace(/[^0-9a-f]/gi, '');
            if (hex.length < 6) {
                hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
            }
            lum = lum || 0;

            // convert to decimal and change luminosity
            var rgb = "#",
                c, i;
            for (i = 0; i < 3; i++) {
                c = parseInt(hex.substr(i * 2, 2), 16);
                c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);
                rgb += ("00" + c).substr(c.length);
            }

            return rgb;
        },
	  albumChanged:function(o,n){


var colorThief = new ColorThief();
var self=this;
                colorThief.getColor(this.album.albumArt, 10, function (colorRGB) {
                    self.color = self.rgbToHex(colorRGB);
                    var isLight = isLightColor(colorRGB);
                    if (isLight) {
                        self.deeperColor = self.colorLuminance(self.color, -0.2);
                        var tmpColor = self.deeperColor;
                        self.deeperColor = self.color;
                        self.color = tmpColor;
                    } else {
                        self.deeperColor = self.colorLuminance(self.color, 0.2);
                    }
                    self.textColor = "#" + (0xffffff ^ parseInt(self.color.replace("#", ""), 16)).toString(16);
                });

}
    });
  </script>
</polymer-element>
